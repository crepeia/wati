
(function(g){var f=g(window);var a=[];var b=[];var j=false;var l=0;var k=1;var e={top:0,right:0,bottom:0,left:0,};function d(r,p,o,q){var n=g();g.each(a,function(y,x){if(x.height()>0){var s=x.offset().top,w=x.offset().left,v=w+x.width(),u=s+x.height();var t=!(w>p||v<q||s>o||u<r);if(t){n.push(x)}}});return n}function i(){++l;var q=f.scrollTop(),p=f.scrollLeft(),o=p+f.width(),n=q+f.height();var r=d(q+e.top+200,o+e.right,n+e.bottom,p+e.left);g.each(r,function(u,t){var s=t.data("scrollSpy:ticks");if(typeof s!="number"){t.triggerHandler("scrollSpy:enter")}t.data("scrollSpy:ticks",l)});g.each(b,function(u,t){var s=t.data("scrollSpy:ticks");if(typeof s=="number"&&s!==l){t.triggerHandler("scrollSpy:exit");t.data("scrollSpy:ticks",null)}});b=r}function h(){f.trigger("scrollSpy:winSize")}var c=(Date.now||function(){return new Date().getTime()});function m(o,q,u){var n,s,v;var t=null;var r=0;u||(u={});var p=function(){r=u.leading===false?0:c();t=null;v=o.apply(n,s);n=s=null};return function(){var w=c();if(!r&&u.leading===false){r=w}var x=q-(w-r);n=this;s=arguments;if(x<=0){clearTimeout(t);t=null;r=w;v=o.apply(n,s);n=s=null}else{if(!t&&u.trailing!==false){t=setTimeout(p,x)}}return v}}g.scrollSpy=function(n,o){var q=[];n=g(n);n.each(function(t,s){a.push(g(s));g(s).data("scrollSpy:id",t);g("a[href=#"+g(s).attr("id")+"]").click(function(u){u.preventDefault();var v=g(this.hash).offset().top+1;g("html, body").animate({scrollTop:v-200},{duration:400,queue:false,easing:"easeOutCubic"})})});o=o||{throttle:100};e.top=o.offsetTop||0;e.right=o.offsetRight||0;e.bottom=o.offsetBottom||0;e.left=o.offsetLeft||0;var r=m(i,o.throttle||100);var p=function(){g(document).ready(r)};if(!j){f.on("scroll",p);f.on("resize",p);j=true}setTimeout(p,0);n.on("scrollSpy:enter",function(){q=g.grep(q,function(t){return t.height()!=0});var s=g(this);if(q[0]){g("a[href=#"+q[0].attr("id")+"]").removeClass("active");if(s.data("scrollSpy:id")<q[0].data("scrollSpy:id")){q.unshift(g(this))}else{q.push(g(this))}}else{q.push(g(this))}g("a[href=#"+q[0].attr("id")+"]").addClass("active")});n.on("scrollSpy:exit",function(){q=g.grep(q,function(t){return t.height()!=0});if(q[0]){g("a[href=#"+q[0].attr("id")+"]").removeClass("active");var s=g(this);q=g.grep(q,function(t){return t.attr("id")!=s.attr("id")});if(q[0]){g("a[href=#"+q[0].attr("id")+"]").addClass("active")}}});return n};g.winSizeSpy=function(n){g.winSizeSpy=function(){return f};n=n||{throttle:100};return f.on("resize",m(h,n.throttle||100))};g.fn.scrollSpy=function(n){return g.scrollSpy(g(this),n)}})(jQuery);